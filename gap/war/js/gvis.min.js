
function GVis(chartDiv,chart_type,div_id){this.column_labels=new Array();this.get_gChart=function(type){if(type=="table")return google.visualization.Table;if(type=="piechart")return google.visualization.PieChart;if(type=="barchart")return google.visualization.BarChart;if(type=="columnchart")return google.visualization.ColumnChart;if(type=="areachart")return google.visualization.AreaChart;if(type=="linechart")return google.visualization.LineChart;if(type=="scatterchart")return google.visualization.ScatterChart;if(type=="imagesparkline")return google.visualization.ImageSparkLine;if(type=="intensitymap")return google.visualization.IntensityMap;if(type=="geomap")return google.visualization.GeoMap;}
this.data=new google.visualization.DataTable();this.currentRow=0;this.setType=function(type){obj=this.get_gChart(type);this.chart=new obj(chartDiv);this.chart_type=type;chartDiv.innerHTML="";if(type=="geomap"){google.visualization.events.addListener(this.chart,'regionClick',function(a){addRegionData(a.region,a.region);});}}
if(chart_type){this.setType(chart_type);}else{this.setType("piechart")}
this.clear=function(){this.column_labels=new Array();this.columnInfo=[];this.data.removeRows(0,this.data.getNumberOfRows());this.data.removeColumns(0,this.data.getNumberOfColumns());}
this.setColumnLabels=function(arr){this.column_labels=arr;}
this.addColumns=function(params){for(param in params){this.data.addColumn(params[param],param);}}
this.setRows=function(rows){this.data.removeRows(0,this.data.getNumberOfRows());this.currentRow=0;this.addRows(rows);}
this.addRows=function(rows){for(var i=0;i<rows.length;i++){this.addRow(rows[i]);}}
this.columnInfo=new Array();this.addRow=function(items){if(items.length==0)return;if(this.data.getNumberOfColumns()<items.length){for(var i=this.data.getNumberOfColumns();i<items.length;i++){if(this.column_labels[i]){l=this.column_labels[i];}else{l="";}
if((items[i]===true)||(items[i]===false)){this.data.addColumn("boolean",l);this.columnInfo.push([l,"boolean"]);}else if(String(parseInt(items[i]))==String(items[i])){this.data.addColumn("number",l);this.columnInfo.push([l,"number"]);}else{this.data.addColumn("string",l);this.columnInfo.push([l,"string"]);}}}
this.data.addRows(1);for(var column=0;column<items.length;column++){this.data.setValue(this.currentRow,column,items[column]);}
this.currentRow++;}
this.getColumnInfo=function(){return this.columnInfo;}
this.draw=function(extraParams){if(!("height"in extraParams)){extraParams["height"]=360;}
if(!("width"in extraParams)){extraParams["width"]=600;}
this.chart.draw(this.data,extraParams);}}